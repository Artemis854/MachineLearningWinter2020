<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="https://rawgit.com/biovisualize/radviz/master/radviz-min.js"></script>
  <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
  <div class="container"></div>
  <div id="tooltip"></div>
  <div id='myDiv'>
    <!-- Plotly chart will be drawn inside this DIV -->
  </div>

  <script>
    var dimensions = ['Yes', 'No', 'Undecided'];
    var radviz = radvizComponent()
      .config({
        el: document.querySelector('.container'),
        colorScale: d3.scale.ordinal().range(['skyblue', 'orange', 'red', 'lime']),
        colorAccessor: function (d) { return d['Group']; },
        dimensions: dimensions,
        size: 1000,
        margin: 100,
        useRepulsion: true,
        drawLinks: true,
        tooltipFormatter: function (d) {
          return '<h1>' + d.Group + '-Q' + d.Question
            + '</h1>' + dimensions.map(function (dB) {
              return dB + ': ' + d[dB];
            }).join('<br />');
        }
      });

    d3.json('https://api.npoint.io/95b13da601a20ab88742', function (error, data) {
      console.log(data);
      radviz.render(data);
    });

    Plotly.d3.json('https://api.npoint.io/95b13da601a20ab88742', function (err, rows) {
      function unpack(rows, key, group) {
        return rows.map(function (row) {
          if (row['Group'] === group) {
            return row[key];
          }
        });
      }

      var trace1 = {
        x: unpack(rows, 'No', 1), y: unpack(rows, 'Yes', 1), z: unpack(rows, 'Undecided', 1),
        mode: 'markers',
        name: 'Group 1',
        marker: {
          size: 12,
          line: {
            width: 1
          },
          opacity: 0.5
        },
        type: 'scatter3d'
      };

      var trace2 = {
        x: unpack(rows, 'No', 2), y: unpack(rows, 'Yes', 2), z: unpack(rows, 'Undecided', 2),
        mode: 'markers',
        name: 'Group 2',
        marker: {
          size: 12,
          line: {
            width: 1
          },
          opacity: 0.5
        },
        type: 'scatter3d'
      };

      var trace3 = {
        x: unpack(rows, 'No', 2), y: unpack(rows, 'Yes', 2), z: unpack(rows, 'Undecided', 2),
        mode: 'markers',
        name: 'Group 3',
        marker: {
          size: 12,
          line: {
            width: 1
          },
          opacity: 0.5
        },
        type: 'scatter3d'
      };

      var trace4 = {
        x: unpack(rows, 'No', 2), y: unpack(rows, 'Yes', 2), z: unpack(rows, 'Undecided', 2),
        mode: 'markers',
        name: 'Group 4',
        marker: {
          size: 12,
          line: {
            width: 1
          },
          opacity: 0.5
        },
        type: 'scatter3d'
      };

      var data = [trace1, trace2, trace3, trace4];
      var layout = {
        xaxis: {
          title: {
            text: 'No',
            font: {
              family: 'Courier New, monospace',
              size: 18,
              color: '#7f7f7f'
            }
          }
        },
        yaxis: {
          title: {
            text: 'Yes',
            font: {
              family: 'Courier New, monospace',
              size: 18,
              color: '#7f7f7f'
            }
          }
        },
        zaxis: {
          title: {
            text: 'Undecided',
            font: {
              family: 'Courier New, monospace',
              size: 18,
              color: '#7f7f7f'
            }
          }
        },
        margin: {
          l: 500,
          r: 700,
          b: 50,
          t: 0
        }
      };
      Plotly.newPlot('myDiv', data, layout);
    });
  </script>
</body>